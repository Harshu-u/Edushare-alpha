{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - EduShare</title>
    
    <link href="{% static 'css/output.css' %}" rel="stylesheet" />
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    </head>
<body class="auth-page text-foreground flex items-center justify-center min-h-screen py-12 px-4">

    <div class="aurora-bg"></div>

    <div class="w-full max-w-md p-8 md:p-10 rounded-2xl glass-card animate-fade-in-up">
        <div class="text-center mb-8">
             <div class="w-14 h-14 btn-primary rounded-2xl flex items-center justify-center text-primary-foreground font-bold text-2xl mx-auto mb-5 shadow-lg">
                ES
             </div>
            <h1 class="text-3xl font-bold text-foreground">Create an Account</h1>
            <p class="text-muted-foreground text-sm mt-2">Join EduShare Today</p>
        </div>

        <form method="post" action="{% url 'register' %}">
            {% csrf_token %}
            
            <div class="space-y-5">
                {% if form.non_field_errors %}
                    {% for error in form.non_field_errors %}
                        <div class="bg-destructive/10 text-destructive text-xs p-3 rounded-lg">{{ error }}</div>
                    {% endfor %}
                {% endif %}

                <div class="grid grid-cols-2 gap-4">
                  <div class="relative">
                      <label for="{{ form.first_name.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">First Name</label>
                      {{ form.first_name }}
                      {% for error in form.first_name.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                  </div>
                  
                  <div class="relative">
                      <label for="{{ form.last_name.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">Last Name</label>
                      {{ form.last_name }}
                      {% for error in form.last_name.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                  </div>
                </div>
                
                <div class="relative">
                    <label for="{{ form.email.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">Email</label>
                    {{ form.email }}
                    {% for error in form.email.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                </div>

                <div class="relative">
                    <label for="{{ form.role.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">I am a...</label>
                    <div class="form-select-wrapper">
                      {{ form.role }}
                    </div>
                    {% for error in form.role.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                </div>

                <div class="border-t border-border/50 pt-5 space-y-5">
                    <div class="relative">
                        <label for="{{ form.username.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">Username</label>
                        {{ form.username }}
                        {% for error in form.username.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                    </div>

                    <div class="relative">
                        <label for="{{ form.password1.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">Password</label>
                        {{ form.password1 }}
                        {% for error in form.password1.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                    </div>
                    
                    <div class="relative">
                        <label for="{{ form.password2.id_for_label }}" class="absolute -top-2.5 left-3 px-1 bg-card text-xs font-medium text-muted-foreground">Confirm Password</label>
                        {{ form.password2 }}
                        {% for error in form.password2.errors %}<div class="text-destructive text-xs mt-1">{{ error }}</div>{% endfor %}
                    </div>
                </div>

            </div>

            <button 
                type="submit" 
                class="btn-primary w-full px-4 py-3 rounded-lg text-sm font-semibold mt-8 tracking-wide"
            >
                Create Account
            </button>
        </form>
        
        <p class="text-center text-sm text-muted-foreground mt-8">
            Already have an account? 
            <a href="{% url 'login' %}" class="font-semibold text-primary hover:text-primary-dark hover:underline">
                Login
            </a>
        </p>

        <div class="relative flex items-center justify-center my-6">
          <div class="absolute inset-0 flex items-center">
            <span class="w-full border-t border-border/50"></span>
          </div>
          <span class="relative px-2 text-xs text-muted-foreground bg-card">OR</span>
        </div>
        <a href="{% url 'notes:note-list' %}" class="block w-full text-center text-sm font-semibold text-primary hover:text-primary-dark hover:underline">
          Continue as a Guest
        </a>
        </div>
    
    <script>
        lucide.createIcons();
    </script> 

</body>
</html>