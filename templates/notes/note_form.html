{% extends 'base/base.html' %}

{% block content %}
<h2>{{ view.object|default:'Upload Note' }}</h2>
<form method="post" enctype="multipart/form-data" id="upload-form">
  {% csrf_token %}
  <div class="mb-3">
    {{ form.title.label_tag }}
    {{ form.title }}
  </div>
  <div class="mb-3">
    {{ form.description.label_tag }}
    {{ form.description }}
  </div>
  <div class="mb-3">
    <label for="file" class="form-label">File</label>
    <div id="drop-area" class="p-4 border rounded">
      <p>Drag & Drop files here or click to select (PDF, DOCX, PPT)</p>
      <input id="id_file" type="file" name="file" accept=".pdf,.doc,.docx,.ppt,.pptx" />
    </div>
  </div>
  <div class="mb-3">
    {{ form.category.label_tag }}
    {{ form.category }}
  </div>
  <div class="mb-3">
    {{ form.is_public }} {{ form.is_public.label_tag }}
  </div>
  <button class="btn btn-primary" type="submit">Save</button>
</form>

<script>
  const dropArea = document.getElementById('drop-area');
  const input = document.getElementById('id_file');
  dropArea.addEventListener('click', () => input.click());
  dropArea.addEventListener('dragover', (e) => { e.preventDefault(); dropArea.classList.add('border-primary'); });
  dropArea.addEventListener('dragleave', () => dropArea.classList.remove('border-primary'));
  dropArea.addEventListener('drop', (e) => {
    e.preventDefault();
    dropArea.classList.remove('border-primary');
    input.files = e.dataTransfer.files;
  });
</script>
{% endblock %}
